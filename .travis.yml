dist: xenial

language: python

python:
  - "3.6"
  - "3.7"
  - "3.7-dev"
  - "3.8-dev"

cache: pip

install:
  - pip install --cache-dir .pip.cache/ --progress-bar emoji --upgrade pip setuptools
  - pip install --cache-dir .pip.cache/ --progress-bar emoji --requirement requirements/test.txt

script:
  - safety check --full-report --file requirements/prod.txt
  - safety check --full-report --file requirements/dev.txt
  - safety check --full-report --file requirements/test.txt
  - black --verbose --line-length 79 --target-version py37 *.py app
  - isort --verbose --force-alphabetical-sort-within-sections --case-sensitive --lines-after-imports 2 --lines-between-types 1 *.py app/*.py app/**/*.py
  - python manage.py test
